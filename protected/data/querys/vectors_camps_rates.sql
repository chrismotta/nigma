select p.name as provider, p.type as type, vc.vectors_id as vector, c.id as campaign, v.rate as vector_rate, c.external_rate as ext_rate, count(cl.id) as clicks, count(co.id) as conv from clicks_log cl left join conv_log co on co.clicks_log_id=cl.id left join vectors_log vl on vl.clicks_log_id=cl.id left join vectors_has_campaigns vc on (vc.campaigns_id=cl.campaigns_id and vl.vectors_id=vc.vectors_id) left join campaigns c on c.id=vc.campaigns_id left join vectors v on v.id=vc.vectors_id left join providers p on p.id=cl.providers_id where date(cl.date)>='2016-10-01' and date(cl.date)<='2016-10-07' and vl.vectors_id=202 group by c.id,vl.vectors_id;